# pt助手开发

[![simpleui](https://img.shields.io/badge/developing%20with-Simpleui-2077ff.svg)](https://github.com/newpanjing/simpleui)

### 基本信息

1. 技术栈：Docker、Python、Sqlite3,celery
2. 开发工具：pycharm
3. 部署方式：docker-compose部署
4. 用到的Python包：
   ```bash
   # DJango后台美化
   pip install django-simpleui
   # 汉字简繁转化
   pip install opencc
   # 破cf盾
   pip install cloudscraper
   # django定时任务
   pip install django-apscheduler
   # django redis支持
   pip install django-redis
   # 下载器接口
   pip install transmission-rpc qbittorrent-api deluge-client
   ```

### 功能实现

| 日期 | 功能                                                                               | 实现                                                                                      |
| ------ | ------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------- |
| 0717 | 站点管理（内附爬虫规则、站点授权信息）                                             | 已实现，支持站点见下表                                                                    |
| 0718 | 种子信息抓取并保存                                                                 | 已实现                                                                                    |
| 0719 | 下载器管理                                                                         | 已实现，目前仅支持Transmission，qBittorrent下载器添加任务不返回任务信息，需迂回，容后处理 |
| 0720 | 推送种子到下载器                                                                   | 已实现                                                                                    |
| 0721 | 推送种子后下载任务与种子信息关联                                                   | 已关联，但目前仅支持Tr                                                                    |
| 0725 | 实现可签到站点的签到功能，支持一键多站签到                                         | 已实现                                                                                    |
| 0729 | 实现站点个人数据抓取，天空个人主页盾比较强力，目前迂回获取数据，不是很全           |                                                                                           |
| 0731 | 获取信息时直接签到(如果没有当天数据或者当天数据中签到为否，则执行签到)             |                                                                                           |
| 0801 | 多线程开发                                                                         | 已实现                                                                                    |
| 0802 | 重构部分代码，将用户数据与站点配置文件分离，防止误操作                             | 已完成                                                                                    |
| 0805 | docker部署                                                                         | 已实现                                                                                    |
| 0806 | 定时任务                                                                         | 已实现                                                                                    |
| 0808 | 通知服务                                                                           | 已实现，企业微信需要可信IP，可能需要自行添加                                              |
| -    | 实时监控种子上传下载信息（开发下载器主页，通过hash与种子关联，并获取种子促销信息） | 未开发                                                                                    |
| -    | 后台推送种子信息                                     | 计划内，未开发                                                                            |

### 更新日志
- > 2022.08.13    
   - > ->  正式命名为PTools，感谢群友
   - > ->  支持铂金家
   - > ->  提供了通用配置，可自行添加站点（网站细节不同，不保证能用）
   - > ->  支持数据导入导出
   - > ->  提供docker，支持映射数据库文件
- > 2022.08.12
  - > ->  优化签到信息显示：无签到功能的：无需，已签到：v，未签到：x
  - > ->  优化获取个人数据提示，返回信息加上数据
  - > ->  修复部分不能访问个人主页页面导致签到失败的bug
  - > ->  增加时魔显示
- > 2022.08.10
  - > -> 增加HD天空验证码签到功能开关
  - > -> 调整数据库，历次个人数据展示到我的站点详情页
- > 2022.08.08
  - > -> 对目前已完成功能进行优化，并清理冗余代码
  - > -> 打包新版Docker镜像并推送
- > 2022.08.07
  - > -> 实现企业微信通知，需要自行抓取个人公网IP，
- > 2022.08.05
  - > -> 自动化代码部署完毕，实现签到、拉取个人数据以及拉取首页促销种子的自动化
- > 2022.08.03
  - > -> 获取个人数据的代码已经改造完毕
  - > -> 调整抓取种子的代码，降低对数据库的消耗
    - > -> 调整代码后，sqlite3数据库已经满足需求，已切回sqlite3
- > 2022.08.02
    - > -> 重构部分代码，将用户数据与站点配置文件分离，避免用户误操作
    - > -> 增加排序ID，用户数据根据站点排序进行排序
- > 2022.08.01
    - > -> 切换使用Mysql数据库，性能瓶颈问题已解决
- > 2022.07.31
    - > -> 信息抓取使用多线程，大幅度降低等待时间，但是在数据库写入时Sqlite3本地数据库遇到性能瓶颈，出现无法写入的bug

### 站点支持列表

> 2022.08.03支持列表，根本本人现有站点数据整理

| 序号 | 站点             | 获取种子 | 签到 | 个人数据 | 推送种子 | 备注                                 |
| ------ | ------------------ | ---------- | ------ | ---------- | ---------- | -------------------------------------- |
| 1    | 阿童木           | 支持     | 支持 | 支持     | 支持     |                                      |
| 2    | 猪猪网           | 支持     | 支持 | 支持     | 支持     |                                      |
| 3    | 学校             | 支持     | 支持 | 支持     | 支持     | 由于更新了防御盾，时灵时不灵         |
| 4    | 1PT              | 支持     | 支持 | 支持     | 支持     |                                      |
| 5    | ASL              | 支持     | 支持 | 支持     | 支持     |                                      |
| 6    | CarPT            | 支持     | 支持 | 支持     | 支持     |                                      |
| 7    | 高清视界HDArea   | 支持     | 支持 | 支持     | 支持     |                                      |
| 8    | 红豆饭HDFans     | 支持     | 支持 | 支持     | 支持     |                                      |
| 9    | 时光HDTIME       | 支持     | 支持 | 支持     | 支持     |                                      |
| 10   | MTeam            | 支持     | 支持 | 支持     | 支持     |                                      |
| 11   | HDZONE           | 支持     | 支持 | 支持     | 支持     |                                      |
| 12   | 冬樱WinterSakura | 支持     | 支持 | 支持     | 支持     |                                      |
| 13   | 蚂蚁HDMayi       | 支持     | 支持 | 支持     | 支持     |                                      |
| 14   | 自由农场         | 支持     | 支持 | 支持     | 支持     |                                      |
| 15   | 铂金学院         | 支持     | 支持 | 不支持   | 支持     |                                      |
| 16   | 烧包             | 支持     | 无需 | 支持     | 支持     |                                      |
| 17   | 海棠             | 支持     | 支持 | 支持     | 支持     |                                      |
| 18   | 欧神             | 支持     | 支持 | 支持     | 支持     |                                      |
| 19   | 时间PTT          | 支持     | 支持 | 支持     | 支持     |                                      |
| 20   | 海带             | 支持     | 无需 | 支持     | 支持     |                                      |
| 21   | 白兔             | 支持     | 支持 | 支持     | 支持     |                                      |
| 22   | 芒果             | 支持     | 支持 | 支持     | 支持     |                                      |
| 23   | 艾薇             | 支持     | 无需 | 支持     | 支持     |                                      |
| 24   | 老师             | 支持     | 支持 | 支持     | 支持     |                                      |
| 25   | 马杀鸡           | 支持     | 无需 | 支持     | 支持     |                                      |
| 26   | 欧绅             | 支持     | 无需 | 支持     | 支持     |                                      |
| 27   | 备胎             | 支持     | 无需 | 支持     | 支持     |                                      |
| 28   | 观众             | 支持     | 支持 | 支持     | 支持     |                                      |
| 29   | 丐帮             | 支持     | 支持 | 支持     | 支持     |                                      |
| 30   | 明教             | 支持     | 支持 | 支持     | 支持     |                                      |
| 21   | 天空HDSKY        | 支持     | 支持 | 支持     | 不支持   | 个人主页加盾，暂时无法突破，迂回处理 |
| 32   | 杜比             | 支持     | 支持 | 支持     | 不支持   |                                      |
| 33   | 海胆             | 暂不支持 | 支持 | 支持     | 不支持   |                                      |
| 34   | 海豹             | 不支持   | 无需 | 不支持   | 不支持   |                                      |
| 35   | 明教             | 支持     | 支持 | 支持     | 支持     |                                      |

### 捐助记录

- ## 感谢大佬捐助支持本项目！！！
- > viichien 大佬第一个捐助本项目，使我更有动力继续写下去！

>
